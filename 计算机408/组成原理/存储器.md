# 概述
## 分类
![[Pasted image 20240512204852.png]]
存储器的结构层次主要体现在缓存-主存和主存-辅存上
缓存-主存主要解决CPU和主存速度不匹配的问题.由于缓存的速度比主存快,只要将CPU近期要用的信息调入缓存就可以加速
主存-辅存的层级主要解决存储系统的容量问题.辅存的速度比主存低,而且不能和CPU交换信息,但容量大
# 主存储器
## 概述
主存各存储单元的位置是由单元地址号来表示的,而地址总线是用来指出存储单元地址号的.用8位二进制表示一个字节,因此<font color="#2DC26B">存储字长</font>都取8的整数倍,可以按字寻址也可以按照字节寻址.![[Pasted image 20240512205925.png]]
注意区分字地址和字节地址
## 随机存取寄存器
分为静态RAM和动态RAM(主要)即随机存储内存，这种存储器在断电时将丢失其存储内容，故主要用于存储短时间使用的程序。
## 只读寄存器
ROM（Read-Only Memory）即只读内存，是一种只能读出事先所存数据的固态半导体存储器。
## 存储器的校验
### 海明码
根据纠错理论:L-1=D+C 且D>=C,即编码距离L越大,检测错误位数D越大且纠错能力越大
为了让二进制码有纠错能力,我们为他添加k个检测位组成n+k位代码,且2^k>=n+k+1
对于序列1001011,我们首先计算k,计算出k=4.最后的实际长度为11位,需要加入的位数分别为1,2,4,8![[Pasted image 20240512212121.png]]
然后我们来计算对应的位.让他管理的小组中1的个数为奇数/偶数
c1检测1,3,5,7,9
c2检测 2,3,6,7,10,11..
c3检测4,5,6,7,12,13,14,15...
..
cn : 2^n...一直检测2^n个,然后检测2^n+1个
保证这些位的1的个数是奇数/偶数即可

如何纠错呢?
先计算校验位中的值,只能找出1位的错误.
比如接收到的信息为10110110011,,计算出h1 h2 h3 h4= 0 1 1 0,那么出错的位数就送h4h3h2h1=0110 = 6,就是第六位出错了!
## 提高访问速度的措施
cpu功能增强+IO设备的数量增多,主存的存取速度已经成为计算机的瓶颈,如何提高访问的速度?
1. 单体多字系统:由于程序和数据连续,因此访问cpu的速度也是连续的.如果一个周期内同时去除多个治疗然后逐条发送到cpu,每1/4发送一条,就提升了访问速度
2. 多体并行系统:多体模块组成的存储器,每个模块都有相同的容量和存取速度,都有独立的地址寄存器MAR和数据寄存器MDR等.同时访问即可.顺序存储就是高位,交叉存储就是低位.顺序存储的时间是t+(n-1)r,交叉是nt![[Pasted image 20240513101929.png]]
![[Pasted image 20240513102126.png]]
![[Pasted image 20240513102131.png]]

# 高速缓冲存储器
由于IO设备向主存请求级别大于CPU访问,就出现了CPU等待IO.
cache的命中率h的计算方式:$h=\frac{N_c}{N_c+N_m}$.
平均访问时间为:$t_a=h*t_c+(1-h)t_m$
访问效率就是:访问cache/总时间
## Cache-主存地址映射
有直接映射/全相连映射/组相连映射方法
### 直接映射
![[Pasted image 20240513111903.png]]
在直接映射中,假设cache的大小是$2^m$,那么第i块就对应的是$n*2^m+i$,不够灵活
### 全相连映射
![[Pasted image 20240513120230.png]]
任何一个cache都链接其他所有的地址,但是需要的逻辑电路太多了,成本高,灵活命中率高
### 组相连映射
![[Pasted image 20240513121151.png]]
把cache分为Q组,每组R块,且i=j mod Q,其中i是缓存的组号,j为主存的块号
主存和Cache都分组，主存中一个组内的块数与Cache中的分组数相同，组间采用直接映射，组内采用全相联映射。就是说第cache中的第i组负责主存的$2^m+i$块
## 替换策略
在直接映射中，主存块只与一个cache链接，因此只需要直接替换
而在全相连和组相连中，一个块可以写入若干位置
- FIFO
- LRU算法
- 随机法
# 辅助存储器
简称外存，有磁盘，光盘，硬盘等，存储容量的计算为：$C=n*k*s$,其中n为盘面数，k为磁道数，s为每个磁道的二进制个数，一个柱面表示位置偏移一致
## 循环冗余校验码CRC码
可以发现连续出现的多位错误代码
同计网的算法，假设有效信息为1100，生成多项式为1011,计算CRC码
->1011=x^3+x+1 k+1=4 k=,得到1100010
