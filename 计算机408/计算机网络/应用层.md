在客户-服务器体系结构中，一个总是打开的主机叫做服务器
# 进程通信
一个进程标识为客户，另一个标识为服务器，然后两个进程之间互相通信。

# HTTP协议HyperText Transfer Protoco
http就是超文本传输协议，Web页面由对象组成，一个html基本组件和n个图形组件。http是一个无状态协议，服务器并不管理客户的任何信息。
![[Pasted image 20240505204253.png]]
一个非持续链接的时间的是两个RTT时间
采用连续的花需要维护额外的信息，但是不需要每次都发两个，因此只有第一次需要两个RTT
HTTP请求的第一行叫做请求行，后续叫做首部行
HTTP响应的报文有三个部分，第一个是状态行，6个首部行和实体体
![[Pasted image 20240505205201.png]]
Web缓存服务器记录了历史得到的网页的内容，可以大大减少客户的请求响应时间，但是可能导致用户得到的内容是旧的，因此出现了条件GET，就是if-modified-since。
# 电子邮件
电子邮件的组成有3：用户代理、邮件服务器和简单邮件传输协议。
甲给乙发送一个邮件，首先放到甲的邮件服务器中，然后尝试交付给乙的邮件服务器，如果交付失败，那么邮件存放到甲的报文队列中30分钟尝试重发一次
## SMTP Simple Mail Transfer Protocol（发送邮件）
SMTP限制只能用7比特ascii表示,SMTP不使用中间邮件服务器发送邮件，相比HTTP，他更像一个推协议，而HTTP是一个拉协议
 1. Alice调用她的邮件代理程序并提供Bob的邮件地址（例如bob® someschool. edu）, 撰写报文，然后指示用户代理发送该报文。 
 2. Alice的用户代理把报文发给她的邮件服务器，在那里该报文被放在报文队列中。
 3. 运行在Alice的邮件服务器上的SMTP客户端发现了报文队列中的这个报文，它就 创建一个到运行在Bob的邮件服务器上的SMTP服务器的TCP连接。
 4. 在经过一些初始SMTP握手后，SMTP客户通过该TCP连接发送Alice的报文。 
 5. 在Bob的邮件服务器上，SMTP的服务器端接收该报文。Bob的邮件服务器然后将 该报文放入Bob的邮箱中。
 6. 在Bob方便的时候，他调用用户代理阅读该报文
## POP3 POST OFFICIAL Protocl/IMAP Internet Mail Access protocal
IMAP因特网邮件访问协议 和POP3 第三版邮局协议的区别就是IMAP能在服务器上构建文件夹

# DNS domain name system
因特网的主机的一种标识方式就是使用主机名，但是路由器喜欢用IP，为了找到对应域名对应的IP，我们就需要域名系统DNS。
DNS是由分层的DNS服务器实现的分布式数据库，一个使得主机能够查询分布式数据库的应用层协议，运行在UDP协议之上，使用53端口![[Pasted image 20240505211308.png]]
- 根DNS服务器提供顶级域服务器的IP地址，
- 顶级域服务器提供例如.com，.org的ip，提供权威服务器的地址
- 权威服务器：将自己管理的一些主机名字映射为IP地址，比如BJTU将自己的mis映射为IP
- 还有本地DNS服务，比如一个小区有自己的一台本地DNS服务器，可以为链接他的机器提供ip
![[Pasted image 20240505211622.png]]
## DNS缓存
为了减少时延和DNS服务器的压力，当电脑收到IP和主机名的映射后会保存在本地，过几天后再丢掉这些信息。
## DNS报文
DNS报文只有查询和回答两种，![[Pasted image 20240505212126.png]]
# 内容分发网CDN
内容分发网游一个资源的多个拷贝，并且尝试将最快的体验传输给用户

