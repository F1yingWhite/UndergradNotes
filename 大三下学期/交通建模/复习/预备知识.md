形式化方法必须结合到某种特定的软件开发过程中,而这种结合并不容易,需要花费很长时间.不要混淆建模和编程.一个程序的初始模型应该描述程序应该满足的哪些性质,并不包含算法,用于描述最终程序的正确性.
建模应该与推理相伴而行,软件工程形式化方法=建模+证明,形式化方法不能仅用于模型描述,还要给出正当性.
## 复杂系统和离散系统
我们采用形式化方法构造软件系统开发各个阶段所使用的模型，这种模型称为形式化模型。
数学语言：Event-B，经典逻辑和集合论，具有一定数学基础都熟悉的语言。
开发对象：复杂、离散系统
复杂系统：电子线路、文件传输协议、操作系统、核电控制系统、运载工具控制器，复杂共性，许多部件组成，相互作用，环境交互{并不友善的环境}，可能并发执行，高度正确性，团队协作。
离散系统：虽然系统行为连续，但是从时间上看，他们的操作呈现离散风格。
迁移系统:准确而可靠的抽象为一系列稳定状态,夹杂导致状态的突然改变,变化量大,频繁,并发,这种离散系统叫迁移系统
## 测试推理与模型推理
测试:不涉及任何深刻和复杂的推理,系统只需要根据测试结果调整
模型推理:针对有关模型的各种证明推理,这种模型叫离散模型
## 离散模型
离散模型：由一个状态和一些迁移组成。
状态：由一些常量和变量表示。这些常量和变量处于某个抽象层面。
迁移：在某些特定环境下发生。这种迁移，我们也称为“事件”。
卫（兵）：每一个事件包含一个卫兵，一个有关状态的常量和变量的谓词，表达了这个事件发生的必要条件。
动作：每个事件包含一个动作，描述对一些特定的状态变量的修改操作，作为这个事件发生的结果。
一个离散动态模型构成一类状态迁移机器。便于理解，我们给出一个非形式化的理解。
事件的执行：他描述了一些状态变量的可观察的迁移，我们默认迁移是不需要时间的。进一步，不会有两个事件同时发生。
没有任何的事件的卫兵为真时，模型的执行停止。-----死锁。
当某事件的卫兵为真时，某一事件必须发生，并导致相应的状态修改；
显然，可能存在出现几个卫兵同时为真情况，这种情况称为外部非确定性。
确定性模型：如果所有时刻，至多有一个卫兵为真。
模型停止：模型停止并不是一种强制性的要求。我们研究的大部分系统都绝不死锁，不停止运行。
离散模型具有不变形和可达性
不变式性质：不变式就是一个条件，状态变量必须保证它永恒不变的成立。为了确认这种性质，我们需要证明：我们考虑的不变式和任何一个事件的卫兵成立的条件下，经过与该事件相关的动作修改后，得到的状态仍然使得不变式成立。
可达性：即使一个事件的卫兵现在不一定成立，但是在有穷的步骤内，必然会出现使之成立的情况。可达性是一种特殊的模态。不同于不变式，它们并不是始终都成立，与之对应的断言语句称之为模态的。
## 闭模型
闭模型=一个控制器模型+一个环境模型,是描述环境和一个与之对应的控制器之间发生的动作和反应的离散模型
## 复杂性应对策略
精化:构造一个模型,然后把他做的越来越接近现实,每一个精化的模型,要比其抽象模型有更多变量,在体量上大于它以前的抽象.可以在空间扩展(逐层精化)时间扩展(新加入的变量需要新的迁移来修改,在新的事件中出现,只与新变量有关),数据精化(编程实现)
分解:精化不能完全解决复杂度问题,因为模型会越来越精化,导致状态爆炸,难以管控.分解就是把模型分为几个独立的片段,又能组合到一起称为一个单一的整体模型
泛型实例化:要求必须是参数化的,可以被实现
## B语言
第一,简化Z语言的数学符号；
第二,提出结构化符号,使其支持模块化构建,能够刻画经典程序语言中的模块化语言和面向对象语言；
第三,结合精化演算使得大型程序可以逐步开发；
第四,开发强有力的证明系统；
第五,完全移除人工编程,将最终的精化模型自动化生成代码。
方法在九十年代成功应用于巴黎轨道交通号线的开发,之后也广泛应于众多轨道交通软件系统的开发,包括在北美、南美、欧洲等地区的应用。
## Event-B
B方法主要用于软件系统的形式化开发,它面临了以下的约束：难以考虑系统工程、分布式系统、复杂时间约束等。
出于以上考虑, J-R Abrial教授于本世纪初于瑞士联邦理工大学提出了Event-B方法,将B方法扩展至对系统的开发。
提出的目的是对整个系统的建模和推理,可包括系统的物理环境、电子构件、软件等。
Event-B方法和B方法之间一个很大的区别是包含更加丰富的精化内涵,在精化中可以引入新的观测值,使得在初始的建模阶段,复杂的子系统交互能够被抽象,然后在精化中逐渐地引入。